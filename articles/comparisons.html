<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="scenarios">
<title>Comparing epidemic scenarios • scenarios</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Comparing epidemic scenarios">
<meta property="og:description" content="scenarios">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">scenarios</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/scenarios.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/comparisons.html">Comparing epidemic scenarios</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiverse-trace/scenarios/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Comparing epidemic scenarios</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/scenarios/blob/HEAD/vignettes/comparisons.Rmd" class="external-link"><code>vignettes/comparisons.Rmd</code></a></small>
      <div class="d-none name"><code>comparisons.Rmd</code></div>
    </div>

    
    
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/scenarios" class="external-link">scenarios</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
</details><details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># UK population size is about 67 million in 2023</span></span>
<span><span class="va">uk_pop</span> <span class="op">&lt;-</span> <span class="fl">67</span> <span class="op">*</span> <span class="fl">1e6</span></span>
<span></span>
<span><span class="co"># R0 for pandemic influenza</span></span>
<span><span class="va">r0_flu</span> <span class="op">&lt;-</span> <span class="fl">1.5</span></span></code></pre></div>
</details><p>This first example considers two scenarios of the final size of an influenza epidemic, and examines how considering the age structure of the population can influence estimates of the final epidemic size.
1. Scenario 1 is the uniform mixing scenario, in which all individuals are assumed to be mixing homogeneously, with no differences in social contacts by age or other demographic characteristics.
2. Scenario 2 is the age-stratified mixing scenario, in which individuals are divided into three age bins, 0 – 19, 20 – 39, and 40+, with different social contact patterns for each age group with the other age groups.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a scenario object for uniform mixing and susceptibility</span></span>
<span><span class="va">uniform_mixing</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scenario.html">scenario</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"uniform_mixing"</span>,</span>
<span>  model_function <span class="op">=</span> <span class="st">"finalsize::final_size"</span>,</span>
<span>  parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    r0 <span class="op">=</span> <span class="va">r0_flu</span>,</span>
<span>    contact_matrix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fl">1.0</span> <span class="op">/</span> <span class="va">uk_pop</span><span class="op">)</span>,</span>
<span>    demography_vector <span class="op">=</span> <span class="va">uk_pop</span>,</span>
<span>    susceptibility <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1.0</span><span class="op">)</span>,</span>
<span>    p_susceptibility <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1.0</span><span class="op">)</span>,</span>
<span>    solver <span class="op">=</span> <span class="st">"newton"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  extra_info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    country <span class="op">=</span> <span class="st">"UK"</span>,</span>
<span>    age_groups <span class="op">=</span> <span class="st">"uniform population"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  replicates <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># a scenario for age stratified mixing</span></span>
<span><span class="co"># get age group names</span></span>
<span><span class="va">age_groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="../reference/make_parameters_finalsize_UK.html">make_parameters_finalsize_UK</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">contact_matrix</span><span class="op">)</span></span>
<span></span>
<span><span class="va">age_stratified_mixing</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scenario.html">scenario</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"age_stratified_mixing"</span>,</span>
<span>  model_function <span class="op">=</span> <span class="st">"finalsize::final_size"</span>,</span>
<span>  parameters <span class="op">=</span> <span class="fu"><a href="../reference/make_parameters_finalsize_UK.html">make_parameters_finalsize_UK</a></span><span class="op">(</span>r0 <span class="op">=</span> <span class="va">r0_flu</span><span class="op">)</span>, <span class="co"># use convenience fn</span></span>
<span>  extra_info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    country <span class="op">=</span> <span class="st">"UK"</span>,</span>
<span>    age_groups <span class="op">=</span> <span class="va">age_groups</span></span>
<span>  <span class="op">)</span>,</span>
<span>  replicates <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># view scenario</span></span>
<span><span class="va">age_stratified_mixing</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Epidemic scenario object</span></span></span>
<span><span class="co">#&gt;  Scenario name: "age_stratified_mixing"</span></span>
<span><span class="co">#&gt;  Model function: <span style="color: #00BBBB;">finalsize::final_size</span></span></span>
<span><span class="co">#&gt;  Extra information on: <span style="color: #00BB00;">"country", "age_groups"</span></span></span>
<span><span class="co">#&gt;  Scenario replicates: 1</span></span>
<span><span class="co">#&gt;  Scenario outcomes are not prepared</span></span></code></pre></div>
</details><details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a third scenario from a different country, say, Germany</span></span>
<span><span class="co"># with uniform mixing and susceptibility</span></span>
<span><span class="co"># create a scenario object for uniform mixing</span></span>
<span><span class="va">de_pop</span> <span class="op">&lt;-</span> <span class="fl">84</span> <span class="op">*</span> <span class="fl">1e6</span> <span class="co"># about 84 million</span></span>
<span><span class="va">uniform_mixing_de</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scenario.html">scenario</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"uniform_mixing_de"</span>,</span>
<span>  model_function <span class="op">=</span> <span class="st">"finalsize::final_size"</span>,</span>
<span>  parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    r0 <span class="op">=</span> <span class="va">r0_flu</span>,</span>
<span>    contact_matrix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fl">1.0</span> <span class="op">/</span> <span class="va">de_pop</span><span class="op">)</span>,</span>
<span>    demography_vector <span class="op">=</span> <span class="va">de_pop</span>,</span>
<span>    susceptibility <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1.0</span><span class="op">)</span>,</span>
<span>    p_susceptibility <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1.0</span><span class="op">)</span>,</span>
<span>    solver <span class="op">=</span> <span class="st">"newton"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  extra_info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    age_groups <span class="op">=</span> <span class="st">"uniform population"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  replicates <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print to view</span></span>
<span><span class="va">uniform_mixing_de</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Epidemic scenario object</span></span></span>
<span><span class="co">#&gt;  Scenario name: "uniform_mixing_de"</span></span>
<span><span class="co">#&gt;  Model function: <span style="color: #00BBBB;">finalsize::final_size</span></span></span>
<span><span class="co">#&gt;  Extra information on: <span style="color: #00BB00;">"age_groups"</span></span></span>
<span><span class="co">#&gt;  Scenario replicates: 1</span></span>
<span><span class="co">#&gt;  Scenario outcomes are not prepared</span></span>
<span></span>
<span><span class="co"># add extra information to the Germany scenario using a helper function</span></span>
<span><span class="va">uniform_mixing_de</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sce_add_info.html">sce_add_info</a></span><span class="op">(</span></span>
<span>  <span class="va">uniform_mixing_de</span>,</span>
<span>  info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    country <span class="op">=</span> <span class="st">"Germany"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check that information has been added</span></span>
<span><span class="va">uniform_mixing_de</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Epidemic scenario object</span></span></span>
<span><span class="co">#&gt;  Scenario name: "uniform_mixing_de"</span></span>
<span><span class="co">#&gt;  Model function: <span style="color: #00BBBB;">finalsize::final_size</span></span></span>
<span><span class="co">#&gt;  Extra information on: <span style="color: #00BB00;">"age_groups", "country"</span></span></span>
<span><span class="co">#&gt;  Scenario replicates: 1</span></span>
<span><span class="co">#&gt;  Scenario outcomes are not prepared</span></span></code></pre></div>
</details><p>Create a comparison object to hold the comparisons and filter for comparable scenarios.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flu_comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/comparison.html">comparison</a></span><span class="op">(</span></span>
<span>  <span class="va">uniform_mixing</span>, <span class="va">age_stratified_mixing</span>, <span class="va">uniform_mixing_de</span>,</span>
<span>  baseline <span class="op">=</span> <span class="st">"uniform_mixing"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print to view</span></span>
<span><span class="va">flu_comparison</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Scenario comparison object</span></span></span>
<span><span class="co">#&gt;  Number of scenarios: 3</span></span>
<span><span class="co">#&gt;  Baseline scenario: <span style="color: #0000BB;">"uniform_mixing"</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB00BB;"> Some scenarios have no data, use `run_scenario()` to prepare data</span></span></span>
<span><span class="co">#&gt;  Scenario matching variables:</span></span>
<span><span class="co">#&gt; <span style="color: #BB00BB;">  No matching variables specified yet.</span></span></span>
<span><span class="co">#&gt;  Scenario comparison variables:</span></span>
<span><span class="co">#&gt; <span style="color: #BB00BB;">  No comparison variables specified yet.</span></span></span>
<span><span class="co">#&gt;  Model functions found:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">  finalsize::final_size</span></span></span></code></pre></div>
</details><p>Prepare data for all scenarios at once using the <code><a href="../reference/run_scenario.html">run_scenario()</a></code> method for <code>comparison</code> objects.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flu_comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_scenario.html">run_scenario</a></span><span class="op">(</span><span class="va">flu_comparison</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check that data is ready</span></span>
<span><span class="va">flu_comparison</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Scenario comparison object</span></span></span>
<span><span class="co">#&gt;  Number of scenarios: 3</span></span>
<span><span class="co">#&gt;  Baseline scenario: <span style="color: #0000BB;">"uniform_mixing"</span></span></span>
<span><span class="co">#&gt;  All scenario data are prepared, use `sce_get_outcomes()` to get data</span></span>
<span><span class="co">#&gt;  Scenario matching variables:</span></span>
<span><span class="co">#&gt; <span style="color: #BB00BB;">  No matching variables specified yet.</span></span></span>
<span><span class="co">#&gt;  Scenario comparison variables:</span></span>
<span><span class="co">#&gt; <span style="color: #BB00BB;">  No comparison variables specified yet.</span></span></span>
<span><span class="co">#&gt;  Model functions found:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">  finalsize::final_size</span></span></span></code></pre></div>
</details><div class="section level2">
<h2 id="comparing-within-the-uk">Comparing within the UK<a class="anchor" aria-label="anchor" href="#comparing-within-the-uk"></a>
</h2>
<p>To compare within the UK, filter the <code>comparison</code> object by the “country” entry in the extra information in each scenario.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># filter on the country and whether data have a 'p_infected' column</span></span>
<span><span class="va">flu_comparison_uk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sce_filter_comparable.html">sce_filter_comparable</a></span><span class="op">(</span></span>
<span>  <span class="va">flu_comparison</span>,</span>
<span>  match_variables <span class="op">=</span> <span class="st">"country"</span>,</span>
<span>  comparison_variables <span class="op">=</span> <span class="st">"p_infected"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print and view</span></span>
<span><span class="va">flu_comparison_uk</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Scenario comparison object</span></span></span>
<span><span class="co">#&gt;  Number of scenarios: 2</span></span>
<span><span class="co">#&gt;  Baseline scenario: <span style="color: #0000BB;">"uniform_mixing"</span></span></span>
<span><span class="co">#&gt;  All scenario data are prepared, use `sce_get_outcomes()` to get data</span></span>
<span><span class="co">#&gt;  Scenario matching variables:</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">  "country"</span></span></span>
<span><span class="co">#&gt;  Scenario comparison variables:</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">  "p_infected"</span></span></span>
<span><span class="co">#&gt;  Model functions found:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">  finalsize::final_size</span></span></span>
<span></span>
<span><span class="fu"><a href="../reference/sce_get_scenario_names.html">sce_get_scenario_names</a></span><span class="op">(</span><span class="va">flu_comparison_uk</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "uniform_mixing"        "age_stratified_mixing"</span></span></code></pre></div>
</details><p>Get scenario outcomes and visualise.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get data which are final_size outputs bound together</span></span>
<span><span class="va">data_comparison_uk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sce_get_outcomes.html">sce_get_outcomes</a></span><span class="op">(</span><span class="va">flu_comparison_uk</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print to view</span></span>
<span><span class="va">data_comparison_uk</span></span>
<span><span class="co">#&gt;      demo_grp   susc_grp susceptibility p_infected replicate</span></span>
<span><span class="co">#&gt;        &lt;char&gt;     &lt;char&gt;          &lt;num&gt;      &lt;num&gt;     &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1: demo_grp_1 susc_grp_1              1  0.5828116         1</span></span>
<span><span class="co">#&gt; 2:     [0,20) susc_grp_1              1  0.6544866         1</span></span>
<span><span class="co">#&gt; 3:    [20,40) susc_grp_1              1  0.5750030         1</span></span>
<span><span class="co">#&gt; 4:        40+ susc_grp_1              1  0.4588871         1</span></span>
<span><span class="co">#&gt;            scenario_name</span></span>
<span><span class="co">#&gt;                   &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:        uniform_mixing</span></span>
<span><span class="co">#&gt; 2: age_stratified_mixing</span></span>
<span><span class="co">#&gt; 3: age_stratified_mixing</span></span>
<span><span class="co">#&gt; 4: age_stratified_mixing</span></span>
<span></span>
<span><span class="co"># change name of total population group</span></span>
<span><span class="va">data_comparison_uk</span><span class="op">[</span><span class="va">scenario_name</span> <span class="op">==</span> <span class="st">"uniform_mixing"</span>, <span class="va">demo_grp</span> <span class="op">:=</span> <span class="st">"Total pop."</span><span class="op">]</span></span></code></pre></div>
</details><details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data_comparison_uk</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">demo_grp</span>, <span class="va">p_infected</span>, fill <span class="op">=</span> <span class="va">scenario_name</span><span class="op">)</span>,</span>
<span>    col <span class="op">=</span> <span class="st">"black"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expand_limits.html" class="external-link">expand_limits</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data_comparison_uk</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span></span>
<span>    palette <span class="op">=</span> <span class="st">"Accent"</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"Population susceptibility"</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Heterogeneous"</span>, <span class="st">"Uniform"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span>,</span>
<span>    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"top"</span>,</span>
<span>    legend.key.height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"mm"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Age group"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"% Infected"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</details><p><img src="comparisons_files/figure-html/unnamed-chunk-9-1.png"><!-- --></p>
</div>
<div class="section level2">
<h2 id="comparing-uniform-mixing-across-countries">Comparing uniform mixing, across countries<a class="anchor" aria-label="anchor" href="#comparing-uniform-mixing-across-countries"></a>
</h2>
<p>Filter for the “age_groups” attribute to compare uniform_mixing across the UK and Germany.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># filter on the country and whether data have a 'p_infected' column</span></span>
<span><span class="va">flu_comparison_uniform</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sce_filter_comparable.html">sce_filter_comparable</a></span><span class="op">(</span></span>
<span>  <span class="va">flu_comparison</span>,</span>
<span>  match_variables <span class="op">=</span> <span class="st">"age_groups"</span>,</span>
<span>  comparison_variables <span class="op">=</span> <span class="st">"p_infected"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print and view</span></span>
<span><span class="va">flu_comparison_uniform</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Scenario comparison object</span></span></span>
<span><span class="co">#&gt;  Number of scenarios: 2</span></span>
<span><span class="co">#&gt;  Baseline scenario: <span style="color: #0000BB;">"uniform_mixing"</span></span></span>
<span><span class="co">#&gt;  All scenario data are prepared, use `sce_get_outcomes()` to get data</span></span>
<span><span class="co">#&gt;  Scenario matching variables:</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">  "age_groups"</span></span></span>
<span><span class="co">#&gt;  Scenario comparison variables:</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">  "p_infected"</span></span></span>
<span><span class="co">#&gt;  Model functions found:</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">  finalsize::final_size</span></span></span>
<span></span>
<span><span class="co"># print scenario names in this comparison</span></span>
<span><span class="fu"><a href="../reference/sce_get_scenario_names.html">sce_get_scenario_names</a></span><span class="op">(</span><span class="va">flu_comparison_uniform</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "uniform_mixing"    "uniform_mixing_de"</span></span></code></pre></div>
</details><p>Get scenario outcomes and visualise.</p>
<details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get data which are final_size outputs bound together</span></span>
<span><span class="va">data_comparison_uniform</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sce_get_outcomes.html">sce_get_outcomes</a></span><span class="op">(</span><span class="va">flu_comparison_uniform</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print to view</span></span>
<span><span class="va">data_comparison_uniform</span></span>
<span><span class="co">#&gt;      demo_grp   susc_grp susceptibility p_infected replicate     scenario_name</span></span>
<span><span class="co">#&gt;        &lt;char&gt;     &lt;char&gt;          &lt;num&gt;      &lt;num&gt;     &lt;int&gt;            &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1: demo_grp_1 susc_grp_1              1  0.5828116         1    uniform_mixing</span></span>
<span><span class="co">#&gt; 2: demo_grp_1 susc_grp_1              1  0.5828116         1 uniform_mixing_de</span></span></code></pre></div>
</details><details class="chunk-details" open><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data_comparison_uniform</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">demo_grp</span>, <span class="va">p_infected</span>, fill <span class="op">=</span> <span class="va">scenario_name</span><span class="op">)</span>,</span>
<span>    col <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>    position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expand_limits.html" class="external-link">expand_limits</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span></span>
<span>    palette <span class="op">=</span> <span class="st">"Dark2"</span>,</span>
<span>    name <span class="op">=</span> <span class="st">"Country"</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"UK"</span>, <span class="st">"DE"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span></span>
<span>    labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span>,</span>
<span>    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"top"</span>,</span>
<span>    legend.key.height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"mm"</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span></span>
<span>    expand <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Total population"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"% Infected"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</details><p><img src="comparisons_files/figure-html/unnamed-chunk-12-1.png"><!-- --></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Pratik Gupte, Rosalind Eggo, Edwin Van Leeuwen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
